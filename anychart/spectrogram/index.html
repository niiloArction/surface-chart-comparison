<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>

    <div id="container" style="width: 500px; height: 400px;"></div>

    <script src='https://cdn.anychart.com/releases/8.10.0/js/anychart-base.min.js'></script>
    <script src='https://cdn.anychart.com/releases/8.10.0/js/anychart-gantt.min.js'></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-surface.min.js"></script>
    <script src='https://cdn.anychart.com/releases/8.10.0/js/anychart-map.min.js'></script>
    <script src='https://cdn.anychart.com/releases/8.10.0/js/anychart-data-adapter.min.js'></script>
    <script src="../xydata.iife.js"></script>
    <script>

        const CONFIG = {
            columns: 50,
            rows: 60,
        }

        const { rows, columns } = CONFIG

        const {
            createSpectrumDataGenerator
        } = xydata

     
        anychart.onDocumentReady(function() {
            // create chart
            var chart = anychart.surface()
                          
            
            createSpectrumDataGenerator()
            .setSampleSize( columns )
            .setNumberOfSamples( rows )
            .generate()
            .toPromise()
            .then(data => {

                let iSample = 1
                const addData = () => {
                    const z_data = []

                    iSample = (iSample + 1) % rows

                    for (let i = 0; i < iSample; i++) {
                        data[i].forEach((e,o) => {
                            z_data.push([i,o,e])
                        });
                    }
            
                    chart.data(z_data)
                    setTimeout(addData, 200)
                }
                addData()

                chart.container('container').draw();


            })
        });
            
    </script>
</body>
</html>


